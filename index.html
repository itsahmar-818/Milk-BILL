<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø§Ù†Ø§ Ø§Ø­Ù…Ø¯ Ù…Ù„Ú© Ø´Ø§Ù¾ - Ù¾ÙˆØ±Û’ Ù…Ø§Û Ú©Ø§ Ø±ÙˆØ²Ù†Ø§Ù…Ú†Û (Ø­Ø³Ø§Ø¨ Ú©Û’ Ø³Ø§ØªÚ¾)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Custom styles to mimic the ledger paper look and feel */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            direction: rtl; /* Ensure RTL flow for Urdu */
        }
        .ledger-page {
            width: 100%;
            max-width: 400px; /* Width similar to a typical receipt/ledger book page */
            background-color: white;
            padding: 1.0rem;
            margin: 2rem auto 1rem; /* Adjust margin for button below */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            border: 1px solid #000; /* Stronger border for better export look */
        }
        .main-table, .footer-table, .extra-products-table {
            border-collapse: collapse;
            width: 100%;
            font-size: 0.8rem;
        }
        
        /* Combined table styling for ledger cells */
        .main-table th, .main-table td, .footer-table td, .extra-products-table td {
            border: 1px solid #000;
            padding: 0.2rem 0.4rem;
            height: 1.5rem; /* Standard row height */
            text-align: center;
        }
        .main-table th {
            background-color: #a3c2d1;
            font-weight: bold;
        }
        /* Style for the editable cells */
        [contenteditable="true"]:focus {
            outline: 1px dashed #000;
            outline-offset: -1px;
            background-color: #fffbeb; /* Light yellow background on focus */
        }
        /* Style for numeric input cells */
        .numeric-cell {
            text-align: left; /* Align numbers to the left for better readability (optional) */
            direction: ltr; /* Display numbers in LTR format */
        }
        .whatsapp-icon {
            color: #25D366; 
            display: inline-block;
            vertical-align: middle;
            margin-left: 0.2rem;
            margin-right: 0.1rem;
            width: 25px; /* Slightly larger icon */
            height: 20px;
        }
        .export-button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 0.5rem;
            transition: background-color 0.3s;
        }
        .calculate-btn {
            background-color: #3B82F6; /* Blue button for action */
            color: white;
            padding: 0.5rem 1rem;
            font-weight: bold;
            border-radius: 0.3rem;
            transition: background-color 0.3s;
        }
        .calculate-btn:hover {
            background-color: #2563EB;
          
            
           
        }
        /* Class to hide elements specifically for export */
        .hide-on-export {
            display: none !important;
        }

        @media (max-width: 640px) {
            .ledger-page {
                padding: 1rem;
                margin: 1rem auto;
            }
            .main-table th, .main-table td, .footer-table td, .extra-products-table td {
                padding: 0.1rem 0.3rem;
                font-size: 0.75rem;
                height: 1.2rem;
            }
        }
    </style>
</head>
<body class="p-6">

    <div class="max-w-[400px] mx-auto mb-4 border border-red-500 p-3 rounded bg-red-50 text-red-800" id="calculationBox">
        <h3 class="text-lg font-bold text-center mb-2">Ø®ÙˆØ¯Ú©Ø§Ø± Ø­Ø³Ø§Ø¨ Ú©ØªØ§Ø¨</h3>
        <div class="flex justify-between items-center text-sm mb-3">
            <span class="font-bold ml-2">ÙÛŒ Ú©Ù„Ùˆ Ø±ÛŒÙ¹:</span>
            <span contenteditable="true" id="milkRate" class="border border-red-500 bg-white px-2 py-1 min-w-[60px] text-left numeric-cell rounded">200</span>
            <button id="calculateBtn" class="calculate-btn">
                Ú©Ù„ Ø­Ø³Ø§Ø¨ Ù„Ú¯Ø§Ø¦ÛŒÚº
            </button>
        </div>
        <div class="text-xs text-center opacity-80">
            Ù†ÙˆÙ¹: ÛŒÛ Ø±ÛŒÙ¹ Ú¯Ø§ÛÚ© Ú©Ùˆ Ø¨Ù„ Ù¾Ø± Ù†Ø¸Ø± Ù†ÛÛŒÚº Ø¢Ø¦Û’ Ú¯Ø§Û”
        </div>
    </div>
    
    <div class="ledger-page" id="ledgerContent">
        <div class="text-center mb-2">
            <h1 class="text-xl font-bold border-b-2 border-black inline-block px-6">
                Ø±Ø§Ù†Ø§ Ø§Ø­Ù…Ø¯ Ù…Ù„Ú© Ø´Ø§Ù¾
            </h1> 
            
            <div class="text-xs mt-1 leading-relaxed">
                <span class="font-bold ml-4 flex justify-center items-center">
                    Ù¾Ø±ÙˆÙ¾Ø±Ø§Ø¦Ù¹Ø±: 
                    Ø±Ø§Ù†Ø§ Ø§Ø­Ù…Ø± Ù„Ø·ÛŒÙ 
                    <span class="whatsapp-icon ml-1 mr-1">
                        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.04 2C6.58 2 2.13 6.46 2.13 11.92C2.13 13.77 2.61 15.54 3.55 17.1L2.09 22.07L7.15 20.6C8.67 21.46 10.33 21.91 12.04 21.91C17.5 21.91 21.96 17.45 21.96 11.99C21.96 6.53 17.5 2 12.04 2ZM17.29 16.32C17.02 16.73 15.65 17.47 15.35 17.57C15.05 17.67 14.86 17.72 14.28 17.43C13.7 17.14 12.02 16.58 10.08 15.02C8.58 13.77 7.56 12.35 7.26 11.86C6.97 11.37 6.38 10.6 6.7 10.3C6.98 10 7.28 9.94 7.57 9.92C7.81 9.9 8.05 9.87 8.27 10.3C8.51 10.73 9.17 12.34 9.24 12.48C9.31 12.62 9.38 12.78 9.28 13.01C9.18 13.24 9.09 13.31 8.89 13.55C8.69 13.78 8.46 14.02 8.32 14.16C8.19 14.3 8.04 14.44 8.28 14.75C8.51 15.06 9.01 15.89 9.87 16.63C10.74 17.37 11.41 17.6 11.66 17.72C11.91 17.85 12.19 17.77 12.39 17.63C12.63 17.47 13.38 17.07 13.65 16.7C13.92 16.33 14.16 16.2 14.41 16.1C14.66 16 17.04 15 17.47 15.65C17.91 16.29 17.91 16.24 17.29 16.32Z"/></svg>
                    </span>
                    <span contenteditable="true">0323-6717478</span>
                    
                    <span class="mr-4 ml-4"></span>
                    Ø±Ø§Ù†Ø§ Ø­Ø§Ù…Ø¯ Ù„Ø·ÛŒÙ 
                    <span class="whatsapp-icon ml-2 mr-2">
                        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.04 2C6.58 2 2.13 6.46 2.13 11.92C2.13 13.77 2.61 15.54 3.55 17.1L2.09 22.07L7.15 20.6C8.67 21.46 10.33 21.91 12.04 21.91C17.5 21.91 21.96 17.45 21.96 11.99C21.96 6.53 17.5 2 12.04 2ZM17.29 16.32C17.02 16.73 15.65 17.47 15.35 17.57C15.05 17.67 14.86 17.72 14.28 17.43C13.7 17.14 12.02 16.58 10.08 15.02C8.58 13.77 7.56 12.35 7.26 11.86C6.97 11.37 6.38 10.6 6.7 10.3C6.98 10 7.28 9.94 7.57 9.92C7.81 9.9 8.05 9.87 8.27 10.3C8.51 10.73 9.17 12.34 9.24 12.48C9.31 12.62 9.38 12.78 9.28 13.01C9.18 13.24 9.09 13.31 8.89 13.55C8.69 13.78 8.46 14.02 8.32 14.16C8.19 14.3 8.04 14.44 8.28 14.75C8.51 15.06 9.01 15.89 9.87 16.63C10.74 17.37 11.41 17.6 11.66 17.72C11.91 17.85 12.19 17.77 12.39 17.63C12.63 17.47 13.38 17.07 13.65 16.7C13.92 16.33 14.16 16.2 14.41 16.1C14.66 16 17.04 15 17.47 15.65C17.91 16.29 17.91 16.24 17.29 16.32Z"/></svg>
                    </span>
                    <span contenteditable="true">0300-7198213</span>
                </span>
                <!-- Signature Section -->
<div class="mt-0 flex justify-end">
    <div class="text-center">
        
    </div>
    
</div>

            </div>
            
            <div class="flex justify-between text-sm mt-3 border-b border-black pb-1">
                <div class="flex items-center">
                    <span class="font-bold ml-2">Ø¨Ù„ Ù†Ù…Ø¨Ø±:</span>
                    <span id="invoiceNumber" class="border-b border-dashed border-gray-400 px-2 min-w-[120px]"></span>

                </div>
                <div class="flex items-center">
                    <span class="font-bold ml-2">Ù…ÛÛŒÙ†Û:</span>
        <span contenteditable="true" class="border-b border-dashed border-gray-400 px-2 min-w-[60px] numeric-cell"></span>
                </div>
            </div>

            <div class="flex justify-start text-sm mt-2 pb-1 border-b border-black">
                <span class="font-bold ml-2"> Ù†Ø§Ù… Ø®Ø±ÛŒØ¯Ø§Ø±:</span>
                <span contenteditable="true" class="border-b border-dashed border-gray-400 px-2 min-w-[200px] flex-grow text-right"></span>
            </div>
            <div class="flex justify-between text-sm mt-2 pb-1 border-b border-black">
    <div class="flex items-center">
        <span class="font-bold ml-2">  Ø±ÛŒÙ¹:</span>
        <span contenteditable="true" id="displayRate" class="border-b border-dashed border-gray-400 px-2 min-w-[40px] numeric-cell"></span>
    </div>
    <div class="flex items-center">
        <span class="font-bold ml-2">  Ù…ÙˆØ¨Ø§Ø¦Ù„ Ù†Ù…Ø¨Ø±:</span>
        <span contenteditable="true" class="border-b border-dashed border-gray-400 px-2 min-w-[120px] numeric-cell"></span>
        
        
    </div>
</div>

        </div>

        <table class="main-table">
            <thead>
                <tr>
                    <th class="w-[20%]">ØªØ§Ø±ÛŒØ®</th>
                    <th class="w-[30%]">Ú©Ù„Ùˆ</th>
                    <th class="w-[20%]">ØªØ§Ø±ÛŒØ®</th>
                    <th class="w-[30%]">Ú©Ù„Ùˆ</th>
                </tr>
            </thead>
            <tbody id="ledgerBody">
                </tbody>
        </table>
        
        <div class="flex justify-between mt-2">
            
            <div class="w-2/5">
                <table class="footer-table">
                    
                    <tr>
                        <td class=" w-1/2">Ú©Ù„ Ø¯ÙˆØ¯Ú¾</td>
                        <td id="totalMilkKg" class="w-1/2 numeric-cell contenteditable="true"></td>
                    </tr>
                    <tr>
                        <td class=" w-1/2">Ú©Ù„ Ø±Ù‚Ù…</td>
                        <td id="totalCalculatedAmount" class="w-1/2 numeric-cell" contenteditable="true"></td>
                    </tr>
                    <tr>
                        <td class="w-1/2">Ø¨Ù‚Ø§ÛŒØ§</td>
                        <td contenteditable="true" id="previousBalance" class="w-1/2 numeric-cell"></td>
                    </tr>
                    <tr>
                        <td class="font-bold w-1/2">Ù¹ÙˆÙ¹Ù„ Ø±Ù‚Ù…</td>
                        <td contenteditable="true" id="grandTotalAmount" class="w-1/2 bg-gray-200 font-bold numeric-cell"></td>
                    </tr>
                </table>
                <div class="bill-footer">
   <!-- Signature Section -->
<div class="mt-10 flex justify-end">
    <div class="text-center">
        <img 
            src="sign.jpg" 
            alt="Authorized Signatory" 
            class="h-10 mx-auto mb-1"
            crossorigin="anonymous"
        >
        <div class="border-t border-black w-32 mx-auto"></div>
        <div class="text-xs mt-1 font-bold">Authorized Signatory </div>
         <!-- Date & Time -->
    <div id="issueDateTime" class="mt-0 text-[10px]"></div>

    </div>
</div>


</div>

            </div>

            <div class="w-3/5 mr-2 flex flex-col justify-end">
                <div class="text-xs p-2 border border-black mb-2 h-full">
                    <div class="text-center font-bold mt-2">
                        Ø¯ÙˆØ¯Ú¾ Ù„Û’ Ø¬Ø§ Ú©Ø± ÙÙˆØ±Ø§ Ú¯Ø±Ù… Ú©Ø± Ù„ÛŒÚº
                        <br>
                        ØªÙ…Ø§Ù… Ù…ØµÙ†ÙˆØ¹Ø§Øª Ø®Ø§Ù„Øµ Ø¯ÙˆØ¯Ú¾ Ø³Û’ ØªÛŒØ§Ø± Ú©ÛŒ Ø¬Ø§ØªÛŒ ÛÛŒÚºÛ”
                        <br>
Ø´Ø§Ø¯ÛŒ Ùˆ ØªÙ‚Ø§Ø±ÛŒØ¨ Ú©Û’ Ø®ØµÙˆØµÛŒ Ø¢Ø±ÚˆØ±Ø² Ø¯Ø³ØªÛŒØ§Ø¨ ÛÛŒÚº â€” Ø¨Ø±Ø§ÛÙ Ú©Ø±Ù… Ø¨Ù„ Ú©ÛŒ Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ Ø¨Ø±ÙˆÙ‚Øª ÙØ±Ù…Ø§Ø¦ÛŒÚºÛ”                    </div>
                </div>
                
                <table class="extra-products-table">
                    <tr>
                        <td class="font-bold w-1/2 bg-yellow-100">Ø¯ÛŒØ³ÛŒ Ú¯Ú¾ÛŒ</td>
<td contenteditable="true" class="w-1/2 numeric-cell bg-yellow-50 text-right extra-item"></td>
                    </tr>
                    <tr>
                        <td class="font-bold w-1/2 bg-yellow-100">Ø¯ÛÛŒ</td>
<td contenteditable="true" class="w-1/2 numeric-cell bg-yellow-50 text-right extra-item"></td>
                    </tr>
                    <tr>
                        <td class="font-bold w-1/2 bg-yellow-100">Ù…Ú©Ú¾Ù†</td>
<td contenteditable="true" class="w-1/2 numeric-cell bg-yellow-50 text-right extra-item"></td>
                    </tr>
                    <tr>
                        <td class="font-bold w-1/2 bg-yellow-100">Ú©Ø±ÛŒÙ…</td>
<td contenteditable="true" class="w-1/2 numeric-cell bg-yellow-50 text-right extra-item"></td>
                    </tr>
                </table>
                
            </div>

        </div>
    </div>
    
    <div class="max-w-md mx-auto p-4 text-center">
        <button id="exportBtn" class="export-button bg-green-500 hover:bg-green-600 text-white shadow-lg w-full">
            ØªØµÙˆÛŒØ± Ø¨Ù†Ø§ Ú©Ø± ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº (Share/Export)
        </button>
        <div id="statusMessage" class="mt-3 text-sm font-medium text-gray-700 hidden"></div>
    </div>
<script>
function getNumber(el) {
    return parseFloat(el.textContent.trim().replace(/,/g, '')) || 0;
}

function formatCurrency(amount) {
    return Math.round(amount).toLocaleString('en-US');
}

function autoRecalculate() {
    // milk amount already calculated
    const milkAmount = getNumber(document.getElementById('totalCalculatedAmount'));

    // previous balance
    const prevBalance = getNumber(document.getElementById('previousBalance'));

    // extra products total
    let extraTotal = 0;
    document.querySelectorAll('.extra-item').forEach(item => {
        extraTotal += getNumber(item);
    });

    const grandTotal = milkAmount + prevBalance + extraTotal;

    document.getElementById('grandTotalAmount').textContent =
        formatCurrency(grandTotal);
}

// ğŸ” auto trigger on typing
document.querySelectorAll('.extra-item, #previousBalance').forEach(el => {
    el.addEventListener('input', autoRecalculate);
    el.addEventListener('blur', autoRecalculate);
});
</script>

    <script>
        // === 1. Date Setup and Table Population ===
        
        const tbody = document.getElementById('ledgerBody');
        const MAX_DAYS = 31;
        const HALF_ROWS = 16; 

        // Self-executing function to populate the rows initially
        (function() {
            // A. Auto-Fill Date
            const dateSpan = document.getElementById('currentDate');
            if (dateSpan) {
                const now = new Date();
                const day = String(now.getDate()).padStart(2, '0');
                const month = String(now.getMonth() + 1).padStart(2, '0'); 
                const year = now.getFullYear();
                dateSpan.textContent = `${day}/${month}/${year}`;
            }

            // B. Populate Table Rows (31 days in 16 rows)
            for (let i = 1; i <= HALF_ROWS; i++) {
                const day1 = i;
                const day2 = i + HALF_ROWS; // Starts at 17

                // Determine content for the second column (Day 17-31)
                const day2Content = day2 <= MAX_DAYS ? 
                    // Column 2 (Day 17-31)
                    `<td contenteditable="true" class="font-bold">${day2}</td><td contenteditable="true" class="numeric-cell kg-input"></td>` :
                    // If day 32 is reached, fill the cells with a dash 
                    `<td class="bg-gray-50 border-gray-400">-</td><td class="bg-gray-50 border-gray-400">-</td>`; 
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td contenteditable="true" class="font-bold">${day1}</td> 
                    <td contenteditable="true" class="numeric-cell kg-input"></td>
                    ${day2Content}
                `;
                tbody.appendChild(row);
            }
        })();

        // === 2. Auto-Calculation Functionality (Attached to calculateBtn) ===
        
        document.getElementById('calculateBtn').addEventListener('click', function() {
            let totalKg = 0;
            
            // 1. Get Rate
            const rateElement = document.getElementById('milkRate');
            // Clean input: remove commas and trim whitespace
            const rateValue = parseFloat(rateElement.textContent.trim().replace(/,/g, '')) || 0;

            // 2. Calculate Total Kilograms
            const kgInputs = document.querySelectorAll('.kg-input');
            kgInputs.forEach(input => {
                const value = parseFloat(input.textContent.trim().replace(/,/g, '')) || 0;
                totalKg += value;
            });

            // 3. Get Previous Balance
            const prevBalanceElement = document.getElementById('previousBalance');
            // Clean input: remove commas and trim whitespace
            const previousBalance = parseFloat(prevBalanceElement.textContent.trim().replace(/,/g, '')) || 0; 


            // Function to format Kg: Remove trailing .00 if it's a whole number
            const formatKg = (kg) => {
                const rounded = Math.round(kg * 100) / 100; // Round to 2 decimal places max
                if (rounded % 1 === 0) {
                    return rounded.toFixed(0); // If whole number, show without decimals
                }
                // Check if only one decimal is needed (e.g., 50.5)
                if ((rounded * 10) % 1 === 0) {
                    return rounded.toFixed(1);
                }
                return rounded.toFixed(2); // If two decimals are needed (e.g., 50.15)
            };

            // Function to format currency (with commas)
            const formatCurrency = (amount) => {
                // Ensure no fractional digits for currency amounts
                return Math.round(amount).toLocaleString('en-US', { minimumFractionDigits: 0 });
            };


            // 4. Calculate Milk Amount and Grand Total
            const totalMilkAmount = totalKg * rateValue;
            const grandTotal = totalMilkAmount + previousBalance; 
            
            // 5. Display Results
            // Display total kg with 'Ú©Ù„Ùˆ' appended
            document.getElementById('totalMilkKg').textContent = formatKg(totalKg) + ' Ú©Ù„Ùˆ'; 
            
            // Display total milk amount formatted with commas (Ú©Ù„ Ø±Ù‚Ù…)
            document.getElementById('totalCalculatedAmount').textContent = formatCurrency(totalMilkAmount); 
            
            // Update the Grand Total field (Ù¹ÙˆÙ¹Ù„ Ø±Ù‚Ù…)
            document.getElementById('grandTotalAmount').textContent = formatCurrency(grandTotal); 
        });


        // === 3. Image Export Functionality (Modified to hide calculation box) ===
        document.getElementById('exportBtn').addEventListener('click', function() {
            const ledgerElement = document.getElementById('ledgerContent');
            const statusMessage = document.getElementById('statusMessage');
            const calculationBox = document.getElementById('calculationBox');
            
            // HIDE the calculation box before capture
            calculationBox.classList.add('hide-on-export');

            // Show loading status
            statusMessage.textContent = 'ØªØµÙˆÛŒØ± ØªÛŒØ§Ø± Ú©ÛŒ Ø¬Ø§ Ø±ÛÛŒ ÛÛ’... Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§Ù†ØªØ¸Ø§Ø± Ú©Ø±ÛŒÚº';
            statusMessage.classList.remove('hidden', 'text-red-500', 'text-green-600');
            statusMessage.classList.add('text-gray-700', 'animate-pulse');
            
            // Temporarily hide the focus outline on editable elements for a cleaner capture
            const editableElements = document.querySelectorAll('[contenteditable="true"]');
            editableElements.forEach(el => el.style.outline = 'none'); 

            // Use html2canvas to capture the content (Only ledgerContent)
            html2canvas(ledgerElement, {
                scale: 2, 
                logging: false,
                useCORS: true, 
                backgroundColor: '#ffffff' 
            }).then(function(canvas) {
                // RESTORE calculation box and focus styles AFTER capture
                calculationBox.classList.remove('hide-on-export');
                editableElements.forEach(el => el.style.outline = '');

                // Convert canvas to a data URL (PNG format)
                const imageURL = canvas.toDataURL('image/png');
                
                const link = document.createElement('a');
                link.href = imageURL;
                link.download = 'Rana_Ahmed_Bill_' + new Date().toISOString().slice(0, 10) + '.png';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Update status
                statusMessage.textContent = 'ØªØµÙˆÛŒØ± Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ ÛÙˆ Ú¯Ø¦ÛŒ ÛÛ’Û”';
                statusMessage.classList.remove('text-gray-700', 'animate-pulse', 'text-red-500');
                statusMessage.classList.add('text-green-600');
                
                setTimeout(() => {
                    statusMessage.classList.add('hidden');
                }, 3000);
            }).catch(error => {
                // RESTORE in case of error
                calculationBox.classList.remove('hide-on-export');
                editableElements.forEach(el => el.style.outline = '');

                console.error('Error generating image:', error);
                statusMessage.textContent = 'ØªØµÙˆÛŒØ± Ø¨Ù†Ø§Ù†Û’ Ù…ÛŒÚº Ø®Ø±Ø§Ø¨ÛŒ ÛÙˆØ¦ÛŒ ÛÛ’Û” (Error)';
                statusMessage.classList.remove('text-gray-700', 'animate-pulse', 'text-green-600');
                statusMessage.classList.add('text-red-500');
                
                setTimeout(() => {
                    statusMessage.classList.add('hidden');
                }, 5000);
            });
        });
    </script>
    <script>
  const now = new Date();

  const options = {
    day: '2-digit',
    month: '2-digit',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
    hour12: true
  };

  document.getElementById("issueDateTime").innerText =
    "Issued : " + now.toLocaleString('en-GB', options);
    
</script>
<script>
(function generateInvoiceNumber() {
    const now = new Date();

    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');

    // Local storage se last serial uthao
    const key = `invoice_serial_${year}_${month}`;
    let serial = localStorage.getItem(key);

    if (!serial) {
        serial = 1;
    } else {
        serial = parseInt(serial) + 1;
    }

    // Save updated serial
    localStorage.setItem(key, serial);

    const formattedSerial = String(serial).padStart(3, '0');

const invoiceNumber = `RAM-${month}${year}-${formattedSerial}`;

    document.getElementById('invoiceNumber').innerText = invoiceNumber;
})();
</script>


</body>
</html>
